{"data":{"site":{"siteMetadata":{"title":"Sean Blanton"}},"markdownRemark":{"html":"<p>Coming up with a consistant set of colors for us in UI design is no easy task. Many times, when style guides are created, a few key hues are picked out and documented. This doesn't take into account he myriad tints and shades that may be needed when used in practical applications.</p>\n<p>One approach to this is to use something like SCSS' <code class=\"language-text\">rgba()</code> function to build new a new color to build a new color.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.alert</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>$red, 0.1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> $red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>This gets us pretty far without much effort - but visually, the effects can sometimes be less than desirable. Certain hues behave different under different levels of luminosity. As Henry Munsell in his 1905 book <em>A Color Notation</em> noted, reds, blues, and purples have a much longer chroma axis than some yellows. Likewise, some hues may need to be adjusted as saturation increases to keep them optically consistent.</p>\n<p>I found myself wanting the flexibility to pull or push hues around quickly, and I wanted the results to be something that could be quickly translated to code so that the single source of truth could live with the developers, rather than a sketch file designers would have to export and transmit back and forth.</p>\n<p>I tried some existing tools created by <a href=\"http://www.jxnblk.com/\">Brent Jackson</a>, namely <a href=\"https://palx.jxnblk.com/\">Palx</a>, which served as a huge inspiration for this project. However, it didn't have the flexibility to adjust hue or saturation. I built Palettes using the same tool as Palx,  <a href=\"http://gka.github.io/chroma.js/\">Chroma JS</a>, but retooling it to have increased flexibility. This little library works wonders.</p>\n<h2>Palettes</h2>\n<p>Here's a peek at Palettes:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">stepsToFloat</span> <span class=\"token operator\">=</span> options <span class=\"token operator\">=></span>\n  Array<span class=\"token punctuation\">.</span><span class=\"token keyword\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> options<span class=\"token punctuation\">.</span>luminance <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>s <span class=\"token operator\">=></span> <span class=\"token function\">modulate</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">.</span>end<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>This is the first piece. It will return the number of tints of a given base color to me, specified later in <code class=\"language-text\">config.js</code></p>\n<p>I then needed to be able to adjust colors with a few parameters.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">shiftColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">chroma</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hsl.h'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">chroma</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hsl.h'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>shift <span class=\"token operator\">*</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">shiftSat</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> sat<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">chroma</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">saturate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>sat <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">hex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>Figuring out the math here was a bit of trial and error. By picking colors manually and plotting them on a curve, I found I was consistanty adjusting saturation on a roughly logarithmic curve. Hue shifts were adjusted on a quadradic curve. This takes a starting color, a step in the scale, an index, and a level of saturation or hue shift. Positive numbers shift hue right on the standard <code class=\"language-text\">CIECAM02</code> model. Negative numbers shift the hue left.</p>\n<p>Then I needed to adjust each color based on it's starting point, changing hue and saturation as those parameters existed:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">buildColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> sat<span class=\"token punctuation\">,</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> color <span class=\"token operator\">=</span> hueSet<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> steps <span class=\"token operator\">=</span> <span class=\"token function\">stepsToFloat</span><span class=\"token punctuation\">(</span>lumSet<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>s <span class=\"token operator\">=></span> <span class=\"token function\">chroma</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span>hue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">luminance</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>sat <span class=\"token operator\">?</span> <span class=\"token function\">shiftSat</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span>hue<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> sat<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>shift <span class=\"token operator\">?</span> <span class=\"token function\">shiftColor</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span>hue<span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">,</span> shift<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// return values as incremented key value pair</span>\n  <span class=\"token keyword\">const</span> values <span class=\"token operator\">=</span> <span class=\"token function\">expandColors</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> steps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  colors<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> values<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>I can loop over this for each step hue I specify:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">buildPalette</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">buildColor</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>sat<span class=\"token punctuation\">,</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>shift<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> colors<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h2>Configuration</h2>\n<p>The <code class=\"language-text\">config.js</code> has two objects defined in it:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> lumSet <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  luminance<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n  start<span class=\"token punctuation\">:</span> <span class=\"token number\">0.05</span><span class=\"token punctuation\">,</span>\n  end<span class=\"token punctuation\">:</span> <span class=\"token number\">0.95</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> hueSet <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  blue<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    hue<span class=\"token punctuation\">:</span> <span class=\"token string\">'54A2F0'</span><span class=\"token punctuation\">,</span>\n    sat<span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">,</span>\n    shift<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  yellow<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    hue<span class=\"token punctuation\">:</span> <span class=\"token string\">'FFCC00'</span><span class=\"token punctuation\">,</span>\n    sat<span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span><span class=\"token punctuation\">,</span>\n    shift<span class=\"token punctuation\">:</span> <span class=\"token string\">'12'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p><code class=\"language-text\">start</code> and <code class=\"language-text\">end</code> are used to keep values from going to dark or too light. This way, individual values remain distinct.</p>\n<p>When I run the script through node with <code class=\"language-text\">$ npm run build</code> it will output a <code class=\"language-text\">.json</code> blob that can be read in to a webapp's config file.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"blue0\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#ecf5fd\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#d4ecff\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#bce1ff\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue3\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#a1d5ff\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue4\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#84c9ff\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue5\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#62baff\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue6\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#2fa8ff\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue7\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#0094ed\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue8\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#007bc9\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"blue9\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#005b98\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"yellow0\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#fff4ca\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#ffe788\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#ffd43a\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow3\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#ffc300\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow4\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#eeaf00\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow5\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#dc9a00\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow6\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#c78300\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow7\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#af6a00\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow8\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#924f00\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"yellow9\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#6b3300\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>You can grab the tool for yourself <a href=\"https://github.com/seanblanton/palettes\">here</a></p>\n<h2>Next Steps</h2>\n<p>This project is by no means done yet. I'd love to expand more on this, building it into a webapp to visualize colors on the fly.</p>","frontmatter":{"title":"Programmatic Color Palettes","date":"17 January, 2017"}}},"pathContext":{"slug":"/programmatic-color-palettes/"}}